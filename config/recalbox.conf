# ==============================================================================
# INFRASTRUCTURE & SYSTEM
# ==============================================================================
# Désactive Kodi. Sur une borne arcade dédiée, c'est du bloatware qui mange de la RAM.
kodi.enabled=0

# Système en lecture seule "logique". On évite les updates auto qui cassent la config la veille d'une soirée.
updates.enabled=0
updates.type=stable

# Langue et Clavier (pour le shell si besoin de debug physique)
system.language=fr_FR
system.keyboard.layout=fr
system.hostname=CORNEDRU-GAMES

# Activation API/SSH pour ton déploiement via Makefile (IaC)
system.api.enabled=1
system.ssh.enabled=1
system.manager.enabled=1

# Gestion du bouton Power (Si tu utilises un bouton sur les PIN 5/6 du GPIO)
# system.power.switch=PIN56ONOFF

# ==============================================================================
# RESEAU (WIFI)
# ==============================================================================
# Active le WiFi pour le scraping et le déploiement SSH
wifi.enabled=1
wifi.region=FR
wifi.ssid=42 Mulhouse
wifi.key=42 Mulhouse

# ==============================================================================
# AUDIO
# ==============================================================================
# Force la sortie. "jack" est souvent utilisé sur les bornes pour aller vers un ampli externe.
# Si tu passes le son par l'écran HDMI, mets "hdmi" ou "auto".
audio.device=auto

# Volume fixe à 95%. Le réglage final se fait au potentiomètre de l'ampli physique.
audio.volume=95

# Musique de fond dans les menus : 0 = Silence de mort (Pro), 1 = Ambiance
audio.bgmusic=1

# ==============================================================================
# CONTROLLERS (GPIO - LOW LATENCY)
# ==============================================================================
# C'est ICI que ça se joue. On bypass l'USB pour taper directement le Kernel.
# Gain de latence : ~10-15ms par rapport à un encodeur USB chinois.
controllers.gpio.enabled=1

# Mapping: map=1 (P1 sur GPIO), 2 (P2 sur GPIO).
# Schéma standard Recalbox/Adafruit (voir doc GPIO plus bas).
controllers.gpio.args=map=1,2

# Désactivation des drivers inutiles pour alléger le polling USB
controllers.ps3.enabled=0
controllers.xboxdrv.enabled=0
controllers.bluetooth.enabled=0

# ==============================================================================
# VIDEO & RENDERING (PIXEL PERFECT)
# ==============================================================================
# RÉSOLUTION : CEA 4 HDMI = 1280x720 @ 60Hz progressif.
# POURQUOI ? 
# 1. 720p est un multiple entier parfait de 240p (3x). L'image est plus nette qu'en 1080p.
# 2. Soulage le GPU du Pi, laissant plus de puissance pour l'émulation et la réduction de lag.
global.videomode=CEA 4 HDMI

# RATIO : "core" force le ratio original (souvent 4/3). 
# "auto" peut parfois stretcher en 16/9, ce qui est un crime contre l'humanité.
global.ratio=core

# LISSAGE : 0. On veut voir les pixels carrés, pas une bouillie floue.
global.smooth=0

# SHADERS : "scanlines" simule un écran CRT (lignes balayage) sans trop bouffer de GPU.
# Donne un look authentique sur un écran LCD moderne.
global.shaders=scanlines

# PIXEL PERFECT : Force le redimensionnement sur des entiers uniquement. 
# Peut créer des bordures noires minimes mais garantit zéro distorsion des sprites.
global.integerscale=1

# ==============================================================================
# PERFORMANCE & LATENCY (RUN AHEAD)
# ==============================================================================
# TECHNIQUE AVANCÉE : "Run-Ahead".
# Calcule X frames à l'avance pour annuler le lag inhérent à l'émulation + écran LCD.
# Si le son crépite sur Pi3, passer à 0. Sur Pi4, laisser à 1.
global.runahead=1

# REMBOBINAGE : Feature sympa mais gourmande en RAM (buffer constant).
# Désactiver si tu sens des ralentissements sur les jeux lourds (NeoGeo/CPS3).
global.rewind=1

# SAUVEGARDE : Auto-save en quittant. Pratique en borne pour ne pas perdre sa progression.
global.autosave=1

# ==============================================================================
# CORES SPECIFIQUES (CHOIX TECHNIQUES)
# ==============================================================================
# ARCADE : FBNeo est plus précis et souvent plus performant que MAME2003 sur Pi moderne.
neogeo.core=fbneo
mame.core=mame2003_plus

# SNES : Snes9x est le bon compromis perf/compatibilité.
snes.core=snes9x

# MASQUER LES SYSTÈMES
# Cache les jeux préinstallés pour n'avoir que TA sélection propre.
global.hidepreinstalled=1